# Reporting Directories Explained

## Conditional reporting (by execution mode)

Reports depend on **TEST_EXECUTION_MODE**:

| Mode          | Report generated      | Auto-open        |
|---------------|------------------------|------------------|
| **development** | Monocart (`monocart-report/`) | Yes (Monocart)   |
| **debug**       | Monocart (`monocart-report/`) | Yes (Monocart)   |
| **production**  | Playwright HTML + Allure     | No (manual open) |

- **Dev/Debug**: Monocart report is generated and auto-opened after tests. Allure is not generated.
- **Production**: Playwright HTML and Allure are generated; Allure is built in global teardown. Open manually.

---

## Quick Answers

### 1. What is `monocart-report/`?
**Monocart reporter output (dev/debug only)**

- Created when you run tests in **development** or **debug** mode (`npm run test:dev`, `npm run test:debug`).
- Tree-grid report with videos, attachments, trace viewer links.
- Auto-opens after tests (via global teardown).
- **Access**: Run `npm run test:dev` or `npm run test:debug`; report opens automatically. Or: `npx monocart show-report monocart-report/index.html`.
- Gitignored. Safe to delete (regenerated on next dev/debug run).

### 2. How to access Allure reports?

**Production mode only**: Allure is generated after production test runs.

**Step 1: Run tests in production mode** (generates `allure-results/` and `allure-report/`):
```bash
npm run test:regression
# or
npm run test:smoke
```

**Step 2: Open Allure report** (generated by global teardown):
```bash
npm run test:report:allure:open
```

**Manual generation** (if needed):
```bash
npm run test:report:allure:generate
npm run test:report:allure:open
```

**One-command** (generate + open):
```bash
npm run test:report:allure
```

**Note**: In development or debug mode, Allure is not generated; use the Monocart report instead.

---

### 3. Are the directories redundant?

**No – they serve different purposes and different modes:**

| Directory | Purpose | When created | Can delete? |
|-----------|---------|--------------|-------------|
| **`test-results/`** | Playwright artifacts (screenshots, videos, traces) | During test execution | Yes |
| **`playwright-report/`** | Playwright HTML report (trace viewer links) | After test execution (production only) | Yes |
| **`monocart-report/`** | Monocart report (tree-grid, video, metrics) | After test execution (dev/debug only) | Yes |
| **`allure-results/`** | Raw Allure data (JSON, attachments) | During test execution (production only) | Yes |
| **`allure-report/`** | Generated Allure HTML report | Global teardown (production only) | Yes |

---

## Directory flow

**Development/Debug mode:**
```
Test execution → test-results/ + monocart-report/ → global teardown opens Monocart
```

**Production mode:**
```
Test execution → test-results/ + playwright-report/ + allure-results/
    → global teardown generates allure-report/
```

---

## Which report to use?

### **Monocart report** (dev/debug)
- Used when running `npm run test:dev` or `npm run test:debug`.
- Tree-grid, video, attachments, trace viewer links.
- Auto-opens after tests.
- **Access**: Automatic, or `npx monocart show-report monocart-report/index.html`.

### **Allure Report 3** (production / BDD)
- Step-level attachments, Gherkin-focused, good for stakeholders.
- **Access**: `npm run test:report:allure:open` after production runs.

### **Playwright HTML report** (production)
- Trace viewer, CI-friendly.
- **Access**: `npm run test:report` after production runs.

---

## Cleanup

All report directories are gitignored and can be deleted; they are recreated when you run tests:

```bash
rm -rf test-results/ playwright-report/ monocart-report/ allure-results/ allure-report/
```

---

## Summary

1. **Monocart** = Dev/debug; auto-opens after tests.
2. **Allure** = Production; generated in teardown; open with `npm run test:report:allure:open`.
3. **Playwright HTML** = Production; open with `npm run test:report`.
4. Directories are mode-specific and not redundant; all are safe to delete and will be regenerated.
