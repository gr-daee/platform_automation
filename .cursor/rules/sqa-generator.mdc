---
description: Generator for DAEE Page Objects and Test Steps
globs: e2e/**/*.ts
alwaysApply: false
---

# DAEE Test Code Generator

Use this rule when asked to "Generate Test" or "Create POM".

## ⚠️ MANDATORY: Context-Aware Generation

**BEFORE generating any test code, you MUST follow `context-awareness.mdc` rule:**

1. **Read Module Knowledge**: `docs/modules/[module]/knowledge.md`
2. **Read Existing Tests**: `docs/modules/[module]/test-cases.md` and `e2e/features/[module]/`
3. **Read Source Code**: `../web_app/src/app/[module]/**/*.tsx`
4. **Read Knowledge Base**: `docs/knowledge-base/` for cross-module info
5. **Review Framework Patterns**: `docs/framework/implementation/`

**After generation, follow `docs-management.mdc` to update documentation.**

## Context Access Rule (The Bridge)
- The Source Code is located in the sibling folder **`../web_app`**.
- When asked to generate a POM, you MUST look for the file in `../web_app/src/app/...`.
- **Selector Strategy:** Since we cannot import types directly from the Web App, infer types from the React Component props.
- **Knowledge Base:** Read `docs/modules/[module]/knowledge.md` to understand business rules and patterns.

## Workflow 1: Generating a Page Object Model (POM)
**Input:** User provides a Next.js Source file path (e.g., `src/app/o2c/indents/page.tsx`).

**Pre-Generation Steps (MANDATORY):**
1. Read `docs/modules/[module]/knowledge.md` - Understand business rules and component behavior
2. Read `docs/modules/[module]/test-cases.md` - Check for existing tests and patterns
3. Read `e2e/src/pages/[module]/` - Review existing POMs for patterns
4. Read `../web_app/src/app/[module]/page.tsx` - Analyze the actual component
5. Read all related components in `../web_app/src/app/[module]/components/`

**Output Strategy:**
1. Analyze the `tsx` file and its imported `components` in the `../web_app` folder.
2. Identify every interactive element (Inputs, Buttons, Dropdowns).
3. Generate a Class in `e2e/src/pages/...` mirroring the folder structure.
4. **CRITICAL:** Map `shadcn` Select triggers to specific helper methods (e.g., `selectDealer(name)`).
5. **CRITICAL:** Follow patterns from existing POMs in the same module.
6. **CRITICAL:** Use semantic locators as per `sqa-standards.mdc`.

**Template:**
```typescript
import { Page, Locator, expect } from '@playwright/test';

export class [ModuleName]Page {
  readonly page: Page;
  // Define locators
  
  constructor(page: Page) { this.page = page; ... }

  // Actions
  async submitForm() { ... }
}