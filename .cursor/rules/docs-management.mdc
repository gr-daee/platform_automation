---
description: Documentation Management Standards - Maintain and update documentation when creating tests
globs: docs/**/*.md, e2e/**/*.ts, e2e/**/*.feature
alwaysApply: true
---

# Documentation Management Standards

**CRITICAL RULE**: When creating or modifying tests, you MUST update relevant documentation to keep the knowledge base current.

## Documentation Update Requirements

### When Creating New Tests

You MUST update:

1. **Module Test Cases** (`docs/modules/[module]/test-cases.md`)
   - Add new test scenario
   - Document test coverage
   - Link to feature file

2. **Automation Test Cases** (`docs/test-cases/automation/[module]/`)
   - Create or update test case documentation
   - Include Gherkin scenario
   - Document expected behavior

3. **Module Knowledge** (`docs/modules/[module]/knowledge.md`)
   - Add any new application knowledge discovered
   - Document edge cases found
   - Update business rules if clarified

### When Creating New Page Objects

You MUST update:

1. **Module Knowledge** (`docs/modules/[module]/knowledge.md`)
   - Document component structure discovered
   - Add locator patterns used
   - Document interaction patterns

2. **Framework Implementation** (`docs/framework/implementation/`)
   - Document new POM patterns
   - Add reusable patterns to knowledge base

### When Discovering New Information

You MUST update:

1. **Module Knowledge** - Application behavior, business rules
2. **Knowledge Base** - Cross-module information
3. **Gap Analysis** - If gaps are identified or resolved

## Documentation Structure Standards

### Module Knowledge Template

```markdown
# [Module Name] - Application Knowledge

## Overview
Brief description of the module and its purpose

## Key Components
- **Component Name**: Purpose and key behavior
  - Location: `../web_app/src/app/[module]/components/ComponentName.tsx`
  - Key props: `prop1`, `prop2`
  - State management: [description]

## Business Rules
- **Rule 1**: Description and impact
- **Rule 2**: Description and impact

## Database Schema
- **Table Name**: Purpose
  - Key fields: `field1`, `field2`
  - Relationships: Links to `other_table`
  - Constraints: [any constraints]

## API Endpoints
- **POST /api/[endpoint]**: Purpose
  - Request body: `{ field: type }`
  - Response: `{ field: type }`
  - Error cases: [list]

## Test Patterns
- **Pattern Name**: When to use and example
- **Pattern Name**: When to use and example

## Related Modules
- [Module Name](docs/modules/[module]/README.md) - Relationship description
```

### Test Case Documentation Template

```markdown
# [Module] Test Cases

## Automated Tests

### Test: [Test Name]
- **Feature File**: `e2e/features/[module]/[feature].feature`
- **Scenario**: [Scenario name]
- **Coverage**: [What it tests]
- **Status**: ✅ Automated | ⏳ Pending | ❌ Failed
- **Last Updated**: [Date]

**Gherkin**:
```gherkin
Scenario: [description]
  Given [precondition]
  When [action]
  Then [verification]
```

**Notes**: [Any important notes]

## Manual Test References
- [Link to manual test documentation]
```

## Documentation Update Workflow

### Step 1: Before Creating Test
1. Read existing documentation
2. Identify what's missing
3. Plan documentation updates

### Step 2: During Test Creation
1. Document discoveries in real-time
2. Note patterns and conventions
3. Record business rules found

### Step 3: After Test Creation
1. Update test case documentation
2. Update module knowledge if needed
3. Update gap analysis if gaps resolved
4. Link related documentation

## File Organization Rules

### Where to Put Documentation

**Module-Specific**:
- `docs/modules/[module]/knowledge.md` - Application knowledge
- `docs/modules/[module]/test-cases.md` - Test case inventory
- `docs/modules/[module]/gap-analysis.md` - Gaps and issues
- `docs/modules/[module]/discussions.md` - Discussions and decisions

**Framework-Level**:
- `docs/framework/setup/` - Setup and configuration guides
- `docs/framework/implementation/` - Implementation patterns

**Cross-Module**:
- `docs/knowledge-base/` - Shared knowledge
  - `database-schema.md` - Database structure
  - `business-rules.md` - Business logic
  - `architecture.md` - System architecture
  - `api-endpoints.md` - API documentation

**Test Cases**:
- `docs/test-cases/automation/[module]/` - Automated test documentation
- `docs/test-cases/manual/` - Manual test references

## Markdown Standards

### Required Elements

1. **Headers**: Use proper hierarchy (H1 for title, H2 for sections)
2. **Links**: Use relative paths for internal links
   - ✅ `[Link Text](docs/modules/o2c/knowledge.md)`
   - ❌ `[Link Text](/absolute/path.md)`
3. **Code Blocks**: Always specify language
   - ✅ ` ```typescript`
   - ❌ ` ``` ` (no language)
4. **Lists**: Use consistent formatting
5. **Tables**: For structured data
6. **Examples**: Include code examples where helpful

### Link Format

- Internal docs: `[Text](docs/path/to/file.md)`
- Source code: `[Text](../web_app/src/app/path/to/file.tsx)`
- Test files: `[Text](e2e/features/path/to/file.feature)`

## README Files

Every major directory MUST have a README.md that:
- Explains the directory's purpose
- Lists key files and their purposes
- Provides navigation links
- Explains the organization structure

### README Template

```markdown
# [Directory Name]

## Purpose
Brief description of what's in this directory

## Structure
- `file1.md` - [Purpose]
- `file2.md` - [Purpose]

## Key Documentation
- [Link to important doc]

## Related Documentation
- [Link to related section]

## Navigation
- [Back to main docs](../README.md)
- [Related module](../modules/[module]/README.md)
```

## Documentation Maintenance Checklist

When creating/modifying tests, ensure:

- [ ] Test case added to `docs/modules/[module]/test-cases.md`
- [ ] Module knowledge updated if new info discovered
- [ ] Gap analysis updated if gaps identified/resolved
- [ ] README files updated if structure changes
- [ ] Links are valid and use relative paths
- [ ] Code examples are accurate and tested
- [ ] Business rules are documented accurately

## Prohibited Actions

❌ **DO NOT** create tests without updating documentation
❌ **DO NOT** leave documentation outdated
❌ **DO NOT** use absolute paths in links
❌ **DO NOT** duplicate information across files
❌ **DO NOT** skip README updates

## Integration with Other Rules

This rule works with:
- `context-awareness.mdc` - Reads docs, this rule updates them
- `sqa-generator.mdc` - Generates code, this rule documents it
- `sqa-standards.mdc` - Applies standards, this rule documents patterns

## Success Indicators

✅ Documentation is always up-to-date
✅ New tests are documented immediately
✅ Knowledge base grows with each test
✅ Links are valid and navigation works
✅ README files guide users effectively
✅ No duplicate or conflicting information

## Example: Complete Documentation Update

```markdown
# After creating O2C Indent submission test:

## 1. Update docs/modules/o2c/test-cases.md
- Added "Submit Indent" test case
- Linked to e2e/features/o2c/indents.feature
- Documented coverage

## 2. Update docs/modules/o2c/knowledge.md
- Added business rule: "Indents require dealer selection"
- Documented status flow: draft -> submitted -> approved
- Added API endpoint: POST /api/o2c/indents/submit

## 3. Update docs/test-cases/automation/o2c/indents.md
- Added test scenario documentation
- Included Gherkin syntax
- Documented expected behavior
```

## Remember

**Documentation is Code**: Treat documentation with the same care as code. Keep it current, accurate, and useful.
